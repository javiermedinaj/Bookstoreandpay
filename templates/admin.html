{% extends 'layout.html' %} {% block title %}Admin Panel{% endblock %} {% block
content %}
<div class="bg-white shadow rounded-lg">
  <div class="py-4 px-6 border-b border-gray-200">
    <h2 class="text-2xl font-bold text-gray-800">Book Store Administration</h2>
  </div>

  <div class="p-6">
    <div class="mb-8">
      <h3 class="text-lg font-semibold text-gray-700 mb-4">Add New Book</h3>
      <form
        action="/add_product"
        method="POST"
        enctype="multipart/form-data"
        class="grid grid-cols-1 md:grid-cols-2 gap-4"
      >
        <div class="space-y-2">
          <label for="titulo" class="block text-sm font-medium text-gray-700"
            >Title</label
          >
          <input
            type="text"
            name="titulo"
            id="titulo"
            required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div class="space-y-2">
          <label for="autor" class="block text-sm font-medium text-gray-700"
            >Author</label
          >
          <input
            type="text"
            name="autor"
            id="autor"
            required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div class="space-y-2 md:col-span-2">
          <label
            for="descripcion_completa"
            class="block text-sm font-medium text-gray-700"
            >Description</label
          >
          <textarea
            name="descripcion_completa"
            id="descripcion_completa"
            rows="3"
            required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
          ></textarea>
        </div>

        <div class="space-y-2">
          <label for="categoria" class="block text-sm font-medium text-gray-700"
            >Category</label
          >
          <select
            name="categoria"
            id="categoria"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
          >
            <option value="General">Estudios</option>
            <option value="Fiction">Fiction</option>
            <option value="Mystery">Misterio</option>
            <option value="Science">Ciencia</option>
            <option value="Biography">Biografia</option>
            <option value="General">General</option>
          </select>
        </div>

        <div class="space-y-2 px-3">
          <label for="stock" class="block text-sm font-medium text-gray-700"
            >Stock</label
          >
          <input
            name="stock"
            id="stock"
            min="0"
            required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div class="space-y-2">
          <label for="precio" class="block text-sm font-medium text-gray-700"
            >Price ($)</label
          >
          <input
            name="precio"
            id="precio"
            step="0.01"
            min="0"
            required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div class="space-y-2">
          <label for="image" class="block text-sm font-medium text-gray-700"
            >Book Cover</label
          >
          <input
            type="file"
            name="image"
            id="image"
            accept="image/*"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div class="md:col-span-2 mt-4">
          <button
            type="submit"
            class="px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500"
          >
            <i class="fas fa-plus mr-2"></i> Add Book
          </button>
        </div>
      </form>
    </div>

    <div>
      <h3 class="text-lg font-semibold text-gray-700 mb-4">
        Inventory Management
      </h3>
      <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200">
          <thead class="bg-gray-100">
            <tr>
              <th class="py-3 px-4 border-b text-left">Cover</th>
              <th class="py-3 px-4 border-b text-left">ID</th>
              <th class="py-3 px-4 border-b text-left">Title</th>
              <th class="py-3 px-4 border-b text-left">Author</th>
              <th class="py-3 px-4 border-b text-left">Category</th>
              <th class="py-3 px-4 border-b text-left">Stock</th>
              <th class="py-3 px-4 border-b text-left">Price</th>
              <th class="py-3 px-4 border-b text-left">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for codigo, producto in productos.items() %}
            <tr class="hover:bg-gray-50">
              <td class="py-3 px-4 border-b">
                {% if producto.imagen %}
                <img
                  src="{{ url_for('static', filename='imgs/' + producto.imagen) }}"
                  alt="{{ producto.titulo }}"
                  class="w-12 h-12 object-cover rounded"
                />
                {% else %}
                <div
                  class="w-12 h-12 bg-gray-200 flex items-center justify-center rounded"
                >
                  <i class="fas fa-book text-gray-400"></i>
                </div>
                {% endif %}
              </td>
              <td class="py-3 px-4 border-b">{{ producto.codigo }}</td>
              <td class="py-3 px-4 border-b">{{ producto.titulo }}</td>
              <td class="py-3 px-4 border-b">{{ producto.autor }}</td>
              <td class="py-3 px-4 border-b">
                <span
                  class="bg-emerald-100 text-emerald-800 text-xs px-2 py-1 rounded-full"
                >
                  {{ producto.categoria }}
                </span>
              </td>

              <td class="py-3 px-4 border-b">
                {% if producto.stock|int > 10 %}
                <span class="text-emerald-600">{{ producto.stock }}</span>
                {% elif producto.stock|int > 0 %}
                <span class="text-amber-600">{{ producto.stock }}</span>
                {% else %}
                <span class="text-red-600">{{ producto.stock }}</span>
                {% endif %}
              </td>
              <td class="py-3 px-4 border-b">${{ producto.precio }}</td>
              <td class="py-3 px-4 border-b">
                <div class="flex space-x-2">
                  <a
                    href="{{ url_for('edit_product', codigo=producto.codigo) }}"
                    class="text-blue-600 hover:text-blue-800"
                  >
                    <i class="fas fa-edit"></i>
                  </a>
                  <a
                    href="{{ url_for('delete_product', codigo=producto.codigo) }}"
                    onclick="return confirm('Are you sure you want to delete this book?');"
                    class="text-red-600 hover:text-red-800"
                  >
                    <i class="fas fa-trash"></i>
                  </a>
                </div>
              </td>
            </tr>
            {% else %}
            <tr>
              <td colspan="8" class="py-8 text-center text-gray-500">
                No books in inventory
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
